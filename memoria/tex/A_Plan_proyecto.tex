\apendice{Plan de Proyecto Software}

\section{Introducción}
En este apartado se detallará la planificación seguida durante el proyecto, así como el estudio de viabilidad de este, teniendo en consideración tanto los aspectos económicos como los legales.
\section{Planificación temporal}

Para el desarrollo del proyecto se establecieron \textit{sprints} de 2 semanas, utilizando ZenHub y Zube para la gestión de tareas. Dadas las características propias del proyecto se ha mantenido contacto con los tutores a través de Microsoft Teams para informar sobre los resultados obtenidos de ciertas tareas y, de esta forma, poder actuar en consecuencia.

Las tareas realizadas en cada \textit{sprint} se recogen en las siguientes tablas:

%\begin{table}[h!]
%	\centering
%	\begin{tabular}{C{3cm}|C{3cm}|C{6cm}}  verticalmente las columnas
%		\multicolumn{3}{c}{\textbf{\textit{Sprint} 1}}\\
%		\midrule
%		\textbf{Fecha de inicio} & \textbf{Fecha de fin} & \textbf{Tareas realizadas}\\
%		\midrule
%		2/2/2023 & 15/2/2023 & \begin{itemize}[left=0pt]
%			\item cosa 1
%			\item cosa 2
%		\end{itemize}\tabularnewline
%		\bottomrule
%	\end{tabular}
%	\caption{Tabla del \textit{sprint} 1}
%	\label{tabsprint1}
%\end{table}



\begin{table}[h!]
	\centering
	\begin{tabular}{C{3cm}|C{3cm}|C{6cm}} 
			\multicolumn{3}{c}{\textbf{\textit{Sprint} 1}}\\
			\midrule
			\textbf{Fecha de inicio} & \textbf{Fecha de fin} & \textbf{Tareas realizadas}\\
			\midrule
			2/2/2023 & 15/2/2023 & \begin{itemize}[left=0pt]
					\item Aprendizaje de OpenStreetMap.
					\item Aprendizaje de Neo4j.
					\item Aprendizaje de OverpassQL.
					\item Selección de librería para consultas a OpenStreetMap.
					\item Escoger \textit{drivers} para Neo4j.
				\end{itemize}\tabularnewline
			\bottomrule
		\end{tabular}
	\caption{Tabla del \textit{sprint} 1}
	\label{tabsprint1}
\end{table}

\newpage
La tarea <<Aplicación de algoritmos de distancia de cadenas para corregir categorías comerciales>> dio mal resultado tras analizar las posibles correcciones, por lo que se acabó desestimando.

\begin{table}[h!]
	\centering
	\begin{tabular}{C{3cm}|C{3cm}|C{6cm}} 
		\multicolumn{3}{c}{\textbf{\textit{Sprint} 2}}\\
		\midrule
		\textbf{Fecha de inicio} & \textbf{Fecha de fin} & \textbf{Tareas realizadas}\\
		\midrule
		15/2/2023 & 1/3/2023 & \begin{itemize}[left=0pt]
			\item Carga de ubicaciones de capitales de Europa.
			\item Aplicación de algoritmos de distancia de cadenas para corregir categorías comerciales.
			\item Profundización en el lenguaje de consultas \textit{Cypher}.
		\end{itemize}\tabularnewline
		\bottomrule
	\end{tabular}
	\caption{Tabla del \textit{sprint} 2}
	\label{tabsprint2}
\end{table}


\newpage
Durante el siguiente \textit{sprint} se determinó que la cantidad de enlaces era inabarcable una vez realizada la tarea <<Creación de enlaces por proximidad entre los nodos en Neo4j>>, por lo que las otras tareas son consecuencia de esta conclusión.

También se comprobó el número de ubicaciones comerciales de algunas ciudades, esto se debe a que el número de estas parecía algo inconsistente tras el análisis de los resultados de la tarea <<Carga de ubicaciones de Valladolid, Valencia y Sevilla>>. Esto llevó a considerar el uso de nuevas APIs para sustituir a OpenStreetMap.

Al final se decidió terminar trabajando sobre 3 ciudades de las cargadas en la tarea <<Carga de ubicaciones de 10 ciudades españolas>>, siendo estas Sevilla, Valencia y Zaragoza.
\begin{table}[h!]
	\centering
	\begin{tabular}{C{3cm}|C{3cm}|C{6cm}} 
		\multicolumn{3}{c}{\textbf{\textit{Sprint} 3}}\\
		\midrule
		\textbf{Fecha de inicio} & \textbf{Fecha de fin} & \textbf{Tareas realizadas}\\
		\midrule
		1/3/2023 & 15/3/2023 & \begin{itemize}[left=0pt]
			\item Creación de enlaces por proximidad entre los nodos en Neo4j
			\item Carga de ubicaciones de Valladolid, Valencia y Sevilla.
			\item Carga de ubicaciones de 10 ciudades españolas.
			\item Búsqueda de APIs alternativas.
		\end{itemize}\tabularnewline
		\bottomrule
	\end{tabular}
	\caption{Tabla del \textit{sprint} 3}
	\label{tabsprint3}
\end{table}

\newpage
\begin{table}[h!]
	\centering
	\begin{tabular}{C{3cm}|C{3cm}|C{6cm}} 
		\multicolumn{3}{c}{\textbf{\textit{Sprint} 4}}\\
		\midrule
		\textbf{Fecha de inicio} & \textbf{Fecha de fin} & \textbf{Tareas realizadas}\\
		\midrule
		15/3/2023 & 29/3/2023 & \begin{itemize}[left=0pt]
			\item Pensar en la aplicación del método \textit{Permutation}
			\item Pensar en el guardado de datos de las simulaciones.
			\item Realización de curso de Neo4j GDS (\textit{Graph Data Science}).
		\end{itemize}\tabularnewline
		\bottomrule
	\end{tabular}
	\caption{Tabla del \textit{sprint} 4}
	\label{tabsprint4}
\end{table}

\begin{table}[h!]
	\centering
	\begin{tabular}{C{3cm}|C{3cm}|C{6cm}}
		\multicolumn{3}{c}{\textbf{\textit{Sprint} 5}}\\
		\midrule
		\textbf{Fecha de inicio} & \textbf{Fecha de fin} & \textbf{Tareas realizadas}\\
		\midrule
		29/3/2023 & 12/4/2023 & \begin{itemize}[left=0pt]
			\item Creación de red de categorías.
			\item Aplicación del método \textit{Permutation}
		\end{itemize}\tabularnewline
		\bottomrule
	\end{tabular}
	\caption{Tabla del \textit{sprint} 5}
	\label{tabsprint5}
\end{table}
\newpage
Tras obtener las relaciones marcadas como significativas según los resultados del método \textit{Permutation} en la tarea <<Obtención de relaciones significativas>>, estas eran algo incoherentes. Se consideró apropiado la eliminación de aquellas ubicaciones pertencecientes al mobiliario urbano, puesto que estaban suponiendo un problema.

Tras investigar un poco, se descubrió que la etiqueta <<amenity>> de OpenStreetMap no contemplaba todos los posibles comercios; solo algunos de ellos. Por esto se incluyeron también ubicaciones con la etiqueta <<shop>>, con la intención de volver a realizar las simulaciones esperando obtener mejores resultados.

Una vez borrados los nodos de mobiliario urbano y habiendo incluido ubicaciones etiquetadas con <<shop>> se procedió a realizar de nuevo las simulaciones del método \textit{permutation}. Cuando comenzaron a hacerse estas tardaban un tiempo significativamente mayor al anterior, resultando inviable. Esto es debido a que el tiempo de realización es afectado por el número de categorías, habiendo sido aumentado con la inclusión de las tiendas.


\begin{table}[h!]
	\centering
	\begin{tabular}{C{3cm}|C{3cm}|C{6cm}} 
		\multicolumn{3}{c}{\textbf{\textit{Sprint} 6}}\\
		\midrule
		\textbf{Fecha de inicio} & \textbf{Fecha de fin} & \textbf{Tareas realizadas}\\
		\midrule
		12/4/2023 & 3/5/2023 & \begin{itemize}[left=0pt]
			\item Cálculo de Z-Score y percentiles con los resultados de las simulaciones.
			\item Obtención de relaciones significativas.
			\item Comienzo de desarrollo web.
			\item Curso de aplicaciones con Flask y Neo4j ofrecido por Neo4j.
			\item Documentación de herramientas Web con MDN.
			\item Carga de ubicaciones con etiqueta <<shop>>.

		\end{itemize}\tabularnewline
		\bottomrule
	\end{tabular}
	\caption{Tabla del \textit{sprint} 6}
	\label{tabsprint6}
\end{table}

\newpage
Dados los resultados del anterior \textit{sprint}, se procedió a utilizar ciudades más pequeñas, de Castilla y León, para volver a aplicar este método. Al final se utilizaron datos pertenecientes a León, Salamanca, Valladolid, 
Burgos y Palencia. El resto de ciudades de esta comunidad autónoma quedaron descartadas por presentar un número muy bajo de ubicaciones.

También se eliminaron ubicaciones pertenecientes a mobiliario urbano o a etiquetas auxiliares de Open Street Map.
\begin{table}[h!]
	\centering
	\begin{tabular}{C{3cm}|C{3cm}|C{6cm}} 
		\multicolumn{3}{c}{\textbf{\textit{Sprint} 7}}\\
		\midrule
		\textbf{Fecha de inicio} & \textbf{Fecha de fin} & \textbf{Tareas realizadas}\\
		\midrule
		17/5/2023 & 31/5/2023 & \begin{itemize}[left=0pt]
			\item Carga de ubicaciones de ciudades de Castilla y León.
			\item Rehacer simulaciones método \textit{permutation}.
			\item Obtener Z-Scores y relaciones significativas.
			\item Gestión de usuarios en la web.
		\end{itemize}\tabularnewline
		\bottomrule
	\end{tabular}
	\caption{Tabla del \textit{sprint} 7}
	\label{tabsprint7}
\end{table}

\newpage

\begin{table}[h!]
	\centering
	\begin{tabular}{C{3cm}|C{3cm}|C{6cm}} 
		\multicolumn{3}{c}{\textbf{\textit{Sprint} 8}}\\
		\midrule
		\textbf{Fecha de inicio} & \textbf{Fecha de fin} & \textbf{Tareas realizadas}\\
		\midrule
		31/5/2023 & 14/6/2023 & \begin{itemize}[left=0pt]
			\item Buscar librerías para la visualización de la red.
			\item Obtención de índices de calidad de \textit{permutation}.
			\item Pensar en el almacenamiento de los índices de calidad.
		\end{itemize}\tabularnewline
		\bottomrule
	\end{tabular}
	\caption{Tabla del \textit{sprint} 8}
	\label{tabsprint8}
\end{table}


Tanto en este \textit{sprint} como en el anterior el cálculo de índices de calidad supuso un gran problema. Esto es debido a que este se estaba realizando exclusivamente desde Neo4j y conllevaba un tiempo de computo bastante grande.

\begin{table}[h!]
	\centering
	\begin{tabular}{C{3cm}|C{3cm}|C{6cm}} 
		\multicolumn{3}{c}{\textbf{\textit{Sprint} 9}}\\
		\midrule
		\textbf{Fecha de inicio} & \textbf{Fecha de fin} & \textbf{Tareas realizadas}\\
		\midrule
		14/6/2023 & 28/6/2023 & \begin{itemize}[left=0pt]
			\item Obtención de índices de calidad de \textit{permutation}.
			\item Obtención de índices de calidad de \textit{Jensen}.
			\item Visualización de redes de interacción en la web.
			\item Pantalla de recomendación de ubicaciones en la web.
		\end{itemize}\tabularnewline
		\bottomrule
	\end{tabular}
	\caption{Tabla del \textit{sprint} 9}
	\label{tabsprint9}
\end{table}

\newpage

\begin{table}[h!]
	\centering
	\begin{tabular}{C{3cm}|C{3cm}|C{6cm}} 
		\multicolumn{3}{c}{\textbf{\textit{Sprint} 10}}\\
		\midrule
		\textbf{Fecha de inicio} & \textbf{Fecha de fin} & \textbf{Tareas realizadas}\\
		\midrule
		28/6/2023 & 12/7/2023 & \begin{itemize}[left=0pt]
			\item Obtención de índices de calidad de \textit{permutation}.
			\item Obtención de índices de calidad de \textit{Jensen}.
			\item Cálculo del \textit{Mean Reciprocal Rank} para los índices de calidad.
		\end{itemize}\tabularnewline
		\bottomrule
	\end{tabular}
	\caption{Tabla del \textit{sprint} 10}
	\label{tabsprint10}
\end{table}


En este \textit{sprint} se crearon los modelos de Random Forest para recomendaciones a nivel local.
\begin{table}[h!]
	\centering
	\begin{tabular}{C{3cm}|C{3cm}|C{6cm}} 
		\multicolumn{3}{c}{\textbf{\textit{Sprint} 11}}\\
		\midrule
		\textbf{Fecha de inicio} & \textbf{Fecha de fin} & \textbf{Tareas realizadas}\\
		\midrule
		12/7/2023 & 26/7/2023 & \begin{itemize}[left=0pt]
			\item Creación de \textit{dataset} para aplicar al modelo.
			\item Creación de modelos de Random Forest para cada ciudad.
			\item Validación cruzada de Random Forest
			\item Cálculo de \textit{Mean Reciprocal Rank} para los modelos de Random Forest.
		\end{itemize}\tabularnewline
		\bottomrule
	\end{tabular}
	\caption{Tabla del \textit{sprint} 11}
	\label{tabsprint11}
\end{table}

\newpage


\begin{table}[h!]
	\centering
	\begin{tabular}{C{3cm}|C{3cm}|C{6cm}} 
		\multicolumn{3}{c}{\textbf{\textit{Sprint} 12}}\\
		\midrule
		\textbf{Fecha de inicio} & \textbf{Fecha de fin} & \textbf{Tareas realizadas}\\
		\midrule
		26/7/2023 & 9/8/2023 & \begin{itemize}[left=0pt]
			\item Creación de \textit{datasets} para modelos de Random Forest con transferencia.
			\item Creación de modelos de Random Forest para la transferencia entre ciudades.
			\item Cálculo de \textit{Mean Reciprocal Rank} para los modelos de Random Forest de transferencia.
		\end{itemize}\tabularnewline
		\bottomrule
	\end{tabular}
	\caption{Tabla del \textit{sprint} 12}
	\label{tabsprint12}
\end{table}


Durante los previos \textit{sprints} se crearon los modelos de Random Forest para realizar las recomendaciones. Una vez serializados estos tenían un peso que rondaba entre los 3GB y 5.5GB cada uno. Dado que estos modelos necesitan estar cargados en memoria para poder predecir, sería imposible emplearlos desde \textit{Heroku} en el despliegue por falta de memoria. Para solventarlo, se redujo el número de árboles de 1000 a 100 y se empleó la librería \texttt{joblib} que permite comprimir estos ficheros para facilitar su almacenamiento.

\begin{table}[h!]
	\centering
	\begin{tabular}{C{3cm}|C{3cm}|C{6cm}} 
		\multicolumn{3}{c}{\textbf{\textit{Sprint} 13}}\\
		\midrule
		\textbf{Fecha de inicio} & \textbf{Fecha de fin} & \textbf{Tareas realizadas}\\
		\midrule
		9/8/2023 & 23/8/2023 & \begin{itemize}[left=0pt]
			\item Crear los modelos de Random Forest locales y con transferencia reduciendo el número de árboles.
			\item Serializar los modelos.
			\item Incluir predicciones con Random Forest en la página Web.
			\item Pantalla de recomendaciones con transferencia.
		\end{itemize}\tabularnewline
		\bottomrule
	\end{tabular}
	\caption{Tabla del \textit{sprint} 13}
	\label{tabsprint13}
\end{table}

\newpage

Dado los posibles problemas en cuanto a memoria que podrían presentar el uso de modelos se empleó Docker para facilitar el uso de la herramienta en caso de que se presentaran estos problemas.
\begin{table}[h!]
	\centering
	\begin{tabular}{C{3cm}|C{3cm}|C{6cm}} 
		\multicolumn{3}{c}{\textbf{\textit{Sprint} 14}}\\
		\midrule
		\textbf{Fecha de inicio} & \textbf{Fecha de fin} & \textbf{Tareas realizadas}\\
		\midrule
		23/8/2023 & 6/9/2023 & \begin{itemize}[left=0pt]
			\item Despliegue con Docker de la aplicación web.
			\item Despliegue de la base de datos de Neo4j en Aura DB.
		\end{itemize}\tabularnewline
		\bottomrule
	\end{tabular}
	\caption{Tabla del \textit{sprint} 14}
	\label{tabsprint14}
\end{table}

\newpage
\begin{table}[h!]
	\centering
	\begin{tabular}{C{3cm}|C{3cm}|C{6cm}}
		\multicolumn{3}{c}{\textbf{\textit{Sprint} 15}}\\
		\midrule
		\textbf{Fecha de inicio} & \textbf{Fecha de fin} & \textbf{Tareas realizadas}\\
		\midrule
		6/9/2023 & 20/9/2023 & \begin{itemize}[left=0pt]
			\item Despliegue de la aplicación en Heroku.
			\item Ajustes en la página web.
		\end{itemize}\tabularnewline
		\bottomrule
	\end{tabular}
	\caption{Tabla del \textit{sprint} 15}
	\label{tabsprint15}
\end{table}

\newpage
\section{Estudio de viabilidad}

En todo proyecto de \textit{software} de hacerse un estudio de viabilidad. Para ello ha de tenerse en cuenta el coste que conlleva el desarrollo del producto, así como las posibles restricciones legales que el uso de determinadas herramientas pueden imponer sobre la aplicación.
\subsection{Viabilidad económica}
La viabilidad económica es un análisis sobre los costes financieros que conlleva el desarrollo del producto. Dentro de este se debe tener en consideración los gastos derivados de equipamiento e infraestructura, además del coste asociado al personal de desarrollo. Dado esto, este estudio de viabilidad económica debe de realizarse como si se tratase de una empresa real.

\subsubsection{Costes derivados de recursos}
En esta sección se analizarán los costes derivados de los recursos \textit{software} y \textit{hardware} utilizados durante el desarrollo. También incluiremos aquellos relacionados con el despliegue de la aplicación.

Cabe destacar que algunos de los recursos utilizados son la licencia gratuita ofrecida por las empresas, se listarán también para tenerlos en consideración en caso de que en desarrollos futuros se requiera de obtener algunos planes de pago.

La duración del proyecto ha sido del 2 de febrero hasta el 21 de septiembre, alrededor de 8 meses con 32 semanas. 

\begin{itemize}
	\item \textbf{\textit{Hardware}}:\\ Para el desarrollo de la aplicación se ha hecho uso de 2 ordenadores. El primero de ellos es un ordenador portátil modelo ASUS TUF Gaming F15 FX506HE\_FX506HE que cuenta con un procesador 11th Gen Intel(R) Core(TM) i5-11400H 2.70GHz, 16GB de RAM y una GPU NVIDIA GeForce RTX 3050 Ti con 4GB. Este equipo actualmente tiene un precio de 1199,00 € y se espera amortizarlo en 4 años.
	
	Su coste anual de amortización será:
	\[
	\text{Coste anual de amortización} = \frac{\text{1999,00 €}}{\text{4 años}} \approx \text{299,75 €/año}
	\]
	
	 El segundo equipo se utilizó para realizar aquellas operaciones con una duración bastante larga; se trata de un ordenador de sobremesa que cuenta con un procesador i3-8100 8th Gen Intel(R) Core(TM), 16GB de memoria RAM y una GPU NVIDIA GeForce GTX 1050Ti de 4GB. En su momento se obtuvo este ordenador por un precio cercano a 800€, esperando amortizarlo en 6 años.
	
	Para calcular el coste de amortización de este equipo hay que tener en consideración que se compró hace 5 años y se espera amortizar en 6 años:
	

\[
\text{Amortización acumulada} = \frac{\text{Años desde la compra}}{\text{Años de amortización total}} = \frac{5 \text{ años}}{6 \text{ años}}
\]
\[
\text{Valor no amortizado} = \text{Costo original} - \text{Amortización acumulada}
\]
\[
\text{Valor no amortizado} = 800 \text{ €} - \left(\frac{5}{6} \times 800 \text{ €}\right) = 800 \text{ €} - 666.67 \text{ €} = 133.33 \text{ €}
\]
\[
\text{Costo anual de amortización} = \frac{\text{Valor no amortizado}}{\text{Años por amortizar}} = \frac{133,33 \text{ €}}{1 \text{ año}} \approx 133.33 \text{ €}
\]

El costo anual de amortización, teniendo en cuenta lo que ya ha sido amortizado, es de 133,33 €.

\item \textbf{\textit{Software}}:\\

En cuanto a \textit{software} se utilizó una licencia del sistema operativo Windows 10 Pro. Este tiene un valor aproximado de 200 € mediante medios oficiales. Dado que la fecha de fin de soporte es cercano a 2026, se espera amortizar en 3 años.

\[
Coste anual de amortización = \frac{\text{200 €}}{\text{3 años}} \approx \text{66,6 €/año}
\]

Sobre Neo4j, la base de datos, se ha utilizado la licencia \textit{Community}, que es gratuita. 


\item \textbf{Otros}:
Para el despliegue de la aplicación se ha hecho uso de dos plataformas: Heroku para alojar la aplicación web, y Neo4j AuraDB para alojar la base de datos en la nube. Para estos ha bastado con los planes gratuitos, pero cabe esperar que en futuros desarrollos se sobrepase lo ofertado por estos planes. Especial mención para Neo4j AuraDB, que tiene un límite sobre el número de nodos y enlaces en su plan gratuito que actualmente está cerca de sobrepasar.


	
	
\end{itemize}

Todo esto nos deja con el siguiente coste anual derivado de recursos:
%\tablaApaisadaSmall{Costes de recursos}{lc}{costesrec}{Recurso & Coste}{
%hola & adios }

\begin{table}[h!]
	\centering
	\begin{tabular}{| l | c |}
		\toprule
		\textbf{Recurso} & \textbf{Coste Anual} \\ \midrule
		Windows 10 Pro & 66,6 €\\
		Portatil & 299,75 € \\
		Ordenador de Sobremesa & 133,33 €\\
		AuraDB & 0,00 €\\
		Heroku & 0,00 €\\
		\midrule
		\textbf{Total:} & 499,68 € \\
		\bottomrule
	\end{tabular}
	\caption{Coste anual por recursos.}
	\label{CostResources}
\end{table}

\subsubsection{Costes de personal}
Para estimar los costes de personal se considerará como una empresa de un único empleado, el alumno. Tendrá gran importancia la duración del desarrollo del proyecto, siendo de alrededor de 8 meses.

Se considerará al desarrollador bajo la categoría de <<programador Junior>>, estos ganan en promedio en España alrededor 25.000 € brutos con una jornada completa. Para formalizar sus condiciones de trabajo se considerará que es un contrato a jornada parcial de 20 horas semanales con 14 pagas anuales.

Deberemos recalcular el salario bruto para que se ajuste a la jornada parcial:

\[
\text{Salario Bruto Anual Jornada Parcial} = \text{25.000 €}  \cdot \frac{\text{20 horas}}{\text{40 horas}} = \text{12.500 €}
\]

Y con ello obtener el salario bruto mensual:

\[
\text{Salario Bruto Mensual} = \frac{\text{12.500 €}}{\text{14 pagas}} = \text{892,85 €}
\]

Una vez obtenido el salario bruto mensual a percibir por el trabajador falta calcular la cuantía a pagar por la empresa en concepto de aportación de la empresa a la Seguridad Social. Entre estos se encuentran las distintas contribuciones a la seguridad social~\cite{segsocialSeguridadSocial}.


%\begin{table}[h!]
%	\centering
%	\begin{tabular}{| l | c |}
%		\toprule
%		\textbf{Concepto} & \textbf{Porcentaje} \\ \midrule
%		Contingencias Comunes & 4,70 \%\\
%		Desempleo & 1,60 \% \\
%		Formación Profesional & 0,10 \% \\
%		\midrule
%		\textbf{Total:} & 6,4 \% \\
%		\bottomrule
%	\end{tabular}
%	\caption{Conceptos de Seguridad Social empleado}
%	\label{SSemp}
%\end{table}
%
%Calculadas las contribuciones del empleado, se obtendría con el siguiente salario neto:
%
%\[
%\text{Salario mensual neto} = \text{Salario mensual bruto} - \text{\% de contribución}
%\]
%\[
%\text{Salario mensual neto} = \text{783,03 €} - \text{6,4 \%} = \text{732,92 €}
%\]

Sobre la contribución a la Seguridad Social por parte de la empresa, cabe destacar que ahora los porcentajes se aplican sobre el bruto a percibir por el trabajador.:

\begin{table}[h!]
	\centering
	\begin{tabular}{| l | c |}
		\toprule
		\textbf{Concepto} & \textbf{Porcentaje} \\ \midrule
		Contingencias Comunes & 23,60 \%\\
		Accidentes de trabajo & 1,5 \%\\
		MEI & 0,5 \%\\
		Desempleo & 6,70 \% \\
		FOGASA & 0,20 \%\\
		Formación Profesional & 0,60 \% \\
		\midrule
		\textbf{Total:} & 33,10 \% \\
		\bottomrule
	\end{tabular}
	\caption{Conceptos de Seguridad Social de la empresa}
	\label{SSempresa}
\end{table}

Las contribuciones a la seguridad social supondrían los siguientes gastos:

\begin{table}[h!]
	\centering
	\begin{tabular}{| l | c |}
		\toprule
		\textbf{Concepto} & \textbf{Cuota} \\ \midrule
		Contingencias Comunes & 210,71 € \\
		AT y EP & 13,39 € \\
		MEI & 4,46 € \\
		Desempleo & 59,82 € \\
		FOGASA & 1,79 € \\
		Formación Profesional & 5,36 € \\
		\midrule
		\textbf{Total:} & 295,53 € \\
		\bottomrule
	\end{tabular}
	\caption{Gastos en Seguridad Social de la empresa}
	\label{SSempresagastos}
\end{table}


El coste total de la empresa en personal sería el siguiente:

\[
\text{Coste en personal} = \text{Salario bruto del empleado} + \text{Aportación de la Empresa a la Seguridad Social}
\]

\[
\text{Coste en personal} = \text{892,85 €} + \text{295,53 €} = \text{1.188,38 €}
\]

%\[
%\text{Contribución empresa} = \text{Salario Bruto empleado} - \text{\% de contribución}
%\]
%\[
%\text{Contribución empresa} = \text{783,03 €} - \text{32,60 \%} \approx \text{527,76 €}
%\]
%
%Por tanto, el gasto mensual de personal de la empresa son:
%
%\[
%\text{Gasto mensual en personal} = \text{Salario Bruto empleado} + \text{Contribuciones}
%\]
%\[
%\text{Gasto mensual en personal} = \text{783,03 €} + \text{527,76 €} \approx \text{1.310,79 €}
%\]

\subsubsection{Costes totales}
Al considerar todos los gastos anteriores cerramos con los siguientes gastos durante el periodo de 8 meses de desarrollo:

\begin{table}[h!]
	\centering
	\begin{tabular}{| l | c |}
		\hline
		\textbf{Concepto} & \textbf{Coste} \\ \hline
		Personal & 9.507,04 €\\
		\textit{Hardware} & 288,72  € \\
		\textit{Software} & 44,40 €\\
		Otros & 0,00 €\\
		
		\hline
		\textbf{Coste Total del Proyecto:} & 9.840,16 € \\
		\hline
	\end{tabular}
	\caption{Coste total del proyecto}
	\label{Costproject}
\end{table}

\newpage
\subsection{Viabilidad legal}

Dado que para el desarrollo del proyecto se ha utilizado librerías ajenas, así como datos provenientes de OpenStreetMap, será necesario analizar sus términos de uso y distribución antes de poder asignar una licencia a la aplicación, de esta forma cumpliendo todos los requisitos legales relacionados.

Las librerías empleadas junto con versión y licencia son las siguientes:


\begin{table}[h!]
\centering
\begin{tabular}{|l|c|c|}
	\hline
\textbf{Librería} &\textbf{Versión} & \textbf{Licencia}\\ \hline
bcrypt & 4.0.1 & Apache-2.0\\
\hline
beautifulsoup4 & 4.12.2 & MIT \\
\hline
blinker & 1.6.2 & MIT\\
\hline
click & 8.1.7 & BSD-3-Clause License\\
\hline
colorama & 0.4.6 & BSD-3-Clause License\\
\hline
contourpy & 1.1.0 & BSD-3-Clause License\\
\hline
cycler & 0.11.0 & BSD-3-Clause License\\
\hline
Flask & 2.3.3 & BSD-3-Clause License \\
\hline
Flask-JWT-Extended & 4.5.2 & MIT\\
\hline
Flask-WTF & 1.1.1 & BSD-3-Clause License \\
\hline
fonttools & 4.42.1 & MIT\\
\hline
geojson & 3.0.1 & BSD-3-Clause License \\
\hline
itsdangerous & 2.1.2 & BSD-3-Clause License \\
\hline
Jinja2 & 3.1.2 & BSD-3-Clause License\\
\hline
joblib & 1.3.2 & BSD-3-Clause License\\
\hline
kiwisolver & 1.4.5 & BSD-3-Clause License\\
\hline
lxml & 4.9.3 & BSD License \\
\hline
MarkupSafe & 2.1.3 & BSD-3-Clause License \\
\hline
matplotlib & 3.7.2 & PSF\\
\hline
neo4j & 5.12.0 & Apache-2.0\\
\hline
numpy & 1.25.2 & BSD-3-Clause License\\
\hline
OSMPythonTools & 0.3.5 &  GPL-3\\
\hline
packaging & 23.1 &  Apache-2.0\\
\hline
pandas & 2.1.0 & BSD-3-Clause License\\
\hline
Pillow & 10.0.0 & HPND License\\
\hline
PyJWT & 2.8.0 & MIT \\
\hline
pyparsing & 3.0.9 & MIT\\
\hline
python-dateutil & 2.8.2 & BSD License\\
\hline
python-dotenv & 1.0.0 &  BSD-3-Clause License\\
\hline
pytz & 2023.3 & MIT \\
\hline
scikit-learn & 1.3.0 & BSD-3-Clause License\\
\hline
scipy & 1.11.2 & BSD-3-Clause License\\
\hline
six & 1.16.0 & MIT \\
\hline
soupsieve & 2.5 & MIT\\
\hline
threadpoolctl & 3.2.0 & BSD-3-Clause License\\
\hline
tzdata & 2023.3 &  Apache-2.0\\
\hline
ujson & 5.8.0 & BSD License\\
\hline
Werkzeug & 2.3.7  &BSD-3-Clause License \\
\hline
WTForms & 3.0.1 & BSD-3-Clause License\\
\hline
xarray & 2023.8.0 & Apache-2.0 \\
\hline
gunicorn & 21.2.0 & MIT \\
\hline
Bootstrap & 5.2.3 & MIT \\
\hline
Vis.js & 9.1.6 & MIT \\
\hline
Leaflet.js & 1.9.4 & BSD-2-Clause License \\
\hline
Leaflet.ExtraMarkers & 1.0.5 & MIT \\
\hline
\end{tabular}
\caption{Librerías utilizadas con su versión y licencia}
\label{tab:librerias-licencias}
\end{table}


\begin{itemize}
	\item \textbf{Licencia MIT}: Esta licencia fue definida por el Instituto de Tecnología de Massachusetts, permitiendo el uso libre de las obras independientemente de su fin. No proporciona garantías de uso, librando de responsabilidades a los autores. Se trata de una de las licencias menos restrictivas~\cite{MIT}.
	
	\item \textbf{Apache License 2.0}: Es una licencia de código abierto que permite el uso gratuito así como la modificación y distribución. Obliga a que se mantenga el aviso de \textit{copyright} y de licencia tanto en los archivos originales como aquellos que se modifiquen, así como cuando se se distribuya el \textit{software}. Tampoco ofrece garantías, librando a los autores toda responsabilidad. Requiere otorgar una licencias a los usuarios ~\cite{apache}.
	
	\item \textbf{BSD-3-Clause License}: También se trata de una licencia de código abierto. Permite realizar modificaciones sobre el código, pero indicando si se han realizado cambios en el trabajo original. Al igual que Apache, permite la distribución y exime de responsabilidades con respecto a garantías a los autores. No requiere de otorgar una licencia a los usuarios del \textit{software} y no otorga derechos sobre nombre o marcas asociados con el producto~\cite{BSD}. Destaca por su compatibilidad con otras licencias.
	
	\item \textbf{Licencias GPL}: Las licencias Públicas Generales de GNU son una familia de licencias. Las más comunes son las versiones GPL-2 y GPL-3. Destacan por ser bastante restrictivas en comparación al resto. Tiene lo que se conoce como un \textit{copyleft} fuerte, es decir, obliga que cualquier obra derivada o vinculada con \textit{software} con esta licencia se distribuya también bajo GPL. Obliga que a mantener los avisos de \textit{copyright} y la licencia bajo cualquier distribución del programa. Tienen como objetivo garantizar que los trabajos derivados se mantengan como código abierto~\cite{GPL}.
	
\end{itemize}

Dadas la licencias de las distintas librerías empleadas en el proyecto parece que la más apropiada para licenciar nuestra aplicación resulta ser \textbf{GPL-3}. Esta garantiza que el \textit{software} desarrollado continúe siendo libre, imposibilitando añadir restricciones que puedan limitar las libertades que aporta esta licencia.

\subsubsection{Uso de datos de OpenStreetMap}

En este proyecto más allá de librerías también se emplea datos extraidos del proyecto OpenStreetMap que también cuenta con una licencia propia. Su uso se encuentra bajo los términos definidos por ODbL (Licencia de bases de datos abiertas de Open Data Common) por la fundación OpenStreetMap~\cite{licenseOpenStreetMap}.

Esta licencia hace que tengamos que atribuir los datos utilizados a OpenStreetMap y sus contribuidores. Además descarga de responsabilidad del posible uso que se pueda hacer de ellos, desentendiéndose de posibles errores de precisión o integridad de los datos.

